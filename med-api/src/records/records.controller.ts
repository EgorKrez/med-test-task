import { Body, Controller, Post, UseGuards } from '@nestjs/common';
import { JwtGuard } from '../auth/jwt.guard';

interface Data {
  metadata: number;
  services: number;
  book: number;
  etcData: number;
  name: string;
}

function createData(
  name: string,
  metadata: number,
  services: number,
  book: number,
  etcData: number,
): Data {
  return {
    name,
    metadata,
    services,
    book,
    etcData,
  };
}

const records = [
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
  createData('АИС «Открытая платформа «Образование»»', 305, 3.7, 67, 4.3),
  createData('АИС «Электронный журнал куратора»', 452, 25.0, 51, 4.9),
  createData('АИС SCHOOLS.BY', 262, 16.0, 24, 6.0),
  createData(
    'АИС "Подготовка прогнозных показателей приема и формирование органа...',
    159,
    6.0,
    24,
    4.0,
  ),
  createData(
    'Информационно-аналитическая система ИАС "1-ДУ"',
    356,
    16.0,
    49,
    3.9,
  ),
  createData(
    'АИС "Общереспубликанский банк данных участников централизованного т...',
    408,
    3.2,
    87,
    6.5,
  ),
  createData('Управление контингентом студентов', 237, 9.0, 37, 4.3),
  createData(
    'Республиканская АИС «Электронное образование»',
    375,
    0.0,
    94,
    0.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    518,
    26.0,
    65,
    7.0,
  ),
  createData(
    'Республиканская АИС ведения централизованного банка данных документ...',
    392,
    0.2,
    98,
    0.0,
  ),
  createData('Республиканская АИС «Электронное образование»', 318, 0, 81, 2.0),
  createData(
    'Республиканская АИС «Электронное образование»',
    360,
    19.0,
    9,
    37.0,
  ),
  createData('Управление контингентом студентов', 437, 18.0, 63, 4.0),
];

@Controller('records')
@UseGuards(JwtGuard)
export class RecordsController {
  @Post('create')
  public async createRecord(@Body() record: any) {
    records.push(record);
  }

  @Post('find')
  public async findRecords(@Body() { search, page, limit }: any) {
    const filteredRecords = records.filter((r) => {
      return r.name.toLowerCase().includes(search.toLowerCase());
    });

    return {
      items: filteredRecords.slice(page * limit, page * limit + limit),
      totalItems: filteredRecords.length,
    };
  }
}
